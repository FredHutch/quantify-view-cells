# Quantify View Cells (QVC)

Perform quantification of cells across images in parallel and inspect the results

## Background

When analyzing data collected from high-throughput microscopy, researchers often
need to perform quantification of features (most often cells) from large collections
of image files. The process of quantifying the cells from a single image is often
performed using a custom analysis script which can be executed with a program like
MATLAB. The result of that script's analysis may include both an image which summarizes
the segmentation or feature identification process which was conducted by the script,
as well as a table summarizing each of the features (or cells) which were quantified
from the image.

## Purpose

The purpose of this repository is to:

1. Provide a Nextflow-based workflow for executing an image analysis script in parallel
across many images, and
2. Provide an interactive display for exploring the results of that analysis across
all images

## Approach

To start the analysis, a user will need:

1. A MATLAB script which will analyze a single image and produce outputs which include
both an image and a table of data
2. A sample sheet which lists the location of each image which is to be quantified, as
well as any additional metadata available for each image

The QVC workflow will run the MATLAB script on each of the listed images and collect the
results from each one into a single output folder. Subsequently, the user may elect
to interactively view those results in the QVC viewer, which will provide an opportunity
to review the effectiveness of the image analysis, while also generating figures summarizing
the distribution of values which were generated by the analysis script.

## Usage

NOTE: This script must be run on a system which has MATLAB installed, or which is available
via a system like EasyBuild. This workflow does NOT support the use of Docker/Singularity
containers for running MATLAB.

```
Usage:

nextflow run FredHutch/quantify-view-cells <ARGUMENTS>

Required Arguments:
    --script                Script to be run on each image
    --assets                Any additional files which should be present in the working
                            directory in order for the script to run.
                            Multiple files (or folders) can be specified with a comma-delimited
                            list, while also supporting wildcards.
    --sample_sheet          List of images to process using the specified analysis
    --output                Path to output directory

Optional Arguments:
    --concat_n              Number of tabular results to combine/concatenate in the first round (default: 100)
    --module                If specified, load the specified EasyBuild module(s). Multiple modules may be specified in a colon-delimited list.

Webpage: https://github.com/FredHutch/quantify-view-cells
```
